Проект: Tracker
Объем установленной памяти: -Xmx28m
Нагрузка: выгружаются 100_000 объектов, ранее загруженные в БД

1)jmap
jmap -histo:live,file=histo.txt 13184
 num     #instances         #bytes  class name (module)
-------------------------------------------------------
   1:         13937         837968  [B (java.base@14)
   2:         13436         322464  java.lang.String (java.base@14)
   3:          1818         221240  java.lang.Class (java.base@14)
   4:          5642         180544  java.util.HashMap$Node (java.base@14)
   5:          1828         132336  [Ljava.lang.Object; (java.base@14)
   6:          3836         122752  java.util.concurrent.ConcurrentHashMap$Node (java.base@14)
   7:           308          84744  [C (java.base@14)
   8:          1489          71472  sun.util.locale.LocaleObjectCache$CacheEntry (java.base@14)
   9:           457          64992  [Ljava.util.HashMap$Node; (java.base@14)
  10:           489          41152  [I (java.base@14)
  11:           936          37440  java.lang.ref.SoftReference (java.base@14)
  12:            75          34256  [Ljava.util.concurrent.ConcurrentHashMap$Node; (java.base@14)
  13:           762          24384  sun.util.locale.BaseLocale (java.base@14)
  14:           743          23776  sun.util.locale.BaseLocale$Key (java.base@14)
  15:           483          23184  java.util.HashMap (java.base@14)
  16:           387          18576  java.lang.invoke.MemberName (java.base@14)
  17:           326          16936  [Ljava.lang.String; (java.base@14)
  18:           182          12376  [Ljava.lang.ref.SoftReference; (java.base@14)
  19:           309          12360  java.lang.invoke.MethodType (java.base@14)
  20:           699          11184  java.lang.Object (java.base@14)
  21:           326          10432  java.lang.invoke.MethodType$ConcurrentWeakInternSet$WeakEntry (java.base@14)
  22:           353          10416  [Ljava.lang.Class; (java.base@14)
  23:           401           9624  java.lang.module.ModuleDescriptor$Exports (java.base@14)
  24:           276           8832  java.lang.invoke.LambdaForm$Name (java.base@14)
  25:           327           7848  java.lang.invoke.ResolvedMethodName (java.base@14)
  26:           271           6504  java.util.ImmutableCollections$Set12 (java.base@14)
  27:           389           6224  java.lang.Integer (java.base@14)
  28:           256           6144  java.lang.Long (java.base@14)
  29:           189           6048  java.lang.module.ModuleDescriptor$Requires (java.base@14)
  30:            92           5888  java.util.concurrent.ConcurrentHashMap (java.base@14)
Классов проекта не видно, основу занимают служебные классы.

2)jstat
C:\Users\Kocmoc>jstat -gc 13184 500 10 - во время бездействия
 S0C    S1C    S0U    S1U      EC       EU        OC         OU       MC     MU   CCSC   CCSU   YGC     YGCT    FGC    FGCT    CGC    CGCT     GCT
896,0  896,0   0,0    0,0    7744,0    0,0     19136,0     2501,3   6656,0 4341,1 768,0  428,4   9      0,041    9     0,215    -       -     0,255
896,0  896,0   0,0    0,0    7744,0    0,0     19136,0     2501,3   6656,0 4341,1 768,0  428,4   9      0,041    9     0,215    -       -     0,255
896,0  896,0   0,0    0,0    7744,0    0,0     19136,0     2501,3   6656,0 4341,1 768,0  428,4   9      0,041    9     0,215    -       -     0,255
896,0  896,0   0,0    0,0    7744,0    0,0     19136,0     2501,3   6656,0 4341,1 768,0  428,4   9      0,041    9     0,215    -       -     0,255
896,0  896,0   0,0    0,0    7744,0    0,0     19136,0     2501,3   6656,0 4341,1 768,0  428,4   9      0,041    9     0,215    -       -     0,255
896,0  896,0   0,0    0,0    7744,0    0,0     19136,0     2501,3   6656,0 4341,1 768,0  428,4   9      0,041    9     0,215    -       -     0,255
896,0  896,0   0,0    0,0    7744,0    0,0     19136,0     2501,3   6656,0 4341,1 768,0  428,4   9      0,041    9     0,215    -       -     0,255
896,0  896,0   0,0    0,0    7744,0    0,0     19136,0     2501,3   6656,0 4341,1 768,0  428,4   9      0,041    9     0,215    -       -     0,255
896,0  896,0   0,0    0,0    7744,0    0,0     19136,0     2501,3   6656,0 4341,1 768,0  428,4   9      0,041    9     0,215    -       -     0,255
896,0  896,0   0,0    0,0    7744,0    0,0     19136,0     2501,3   6656,0 4341,1 768,0  428,4   9      0,041    9     0,215    -       -     0,255


C:\Users\Kocmoc>jstat -gc 13184 500 50 - во время загрузки файлов
 S0C    S1C    S0U    S1U      EC       EU        OC         OU       MC     MU   CCSC   CCSU   YGC     YGCT    FGC    FGCT    CGC    CGCT     GCT
896,0  896,0   0,0    0,0    7744,0   5246,6   19136,0    14651,7   6656,0 4333,5 768,0  425,7  13    0,043     11     0,293    -       -     0,335
896,0  896,0   0,0    0,0    7744,0   5246,6   19136,0    14651,7   6656,0 4333,5 768,0  425,7  13    0,043     11     0,293    -       -     0,335
896,0  896,0   0,0    0,0    7744,0   5246,6   19136,0    14651,7   6656,0 4333,5 768,0  425,7  13    0,043     11     0,293    -       -     0,335
896,0  896,0   0,0    0,0    7744,0   5246,6   19136,0    14651,7   6656,0 4333,5 768,0  425,7  13    0,043     11     0,293    -       -     0,335
896,0  896,0   0,0    0,0    7744,0   5246,6   19136,0    14651,7   6656,0 4333,5 768,0  425,7  13    0,043     11     0,293    -       -     0,335
896,0  896,0   0,0    0,0    7744,0   2163,8   19136,0    14651,7   6656,0 4333,5 768,0  425,7  16    0,051     14     0,377    -       -     0,428
896,0  896,0   0,0    0,0    7744,0   5098,3   19136,0    14651,7   6656,0 4333,5 768,0  425,7  17    0,051     15     0,401    -       -     0,452
896,0  896,0   0,0    0,0    7744,0   5098,3   19136,0    14651,7   6656,0 4333,5 768,0  425,7  17    0,051     15     0,401    -       -     0,452
896,0  896,0   0,0    0,0    7744,0   5098,3   19136,0    14651,7   6656,0 4333,5 768,0  425,7  17    0,051     15     0,401    -       -     0,452
896,0  896,0   0,0    0,0    7744,0   5098,3   19136,0    14651,7   6656,0 4333,5 768,0  425,7  17    0,051     15     0,401    -       -     0,452
896,0  896,0   0,0    0,0    7744,0   5098,3   19136,0    14651,7   6656,0 4333,5 768,0  425,7  17    0,051     15     0,401    -       -     0,452

После выгрузки(не одной) изменились показатели:
1)EU - увеличился объем Eden
2)OU - увеличился используемый объем Old
3)MU - незначительно снизилось использование мета пространства
4)CCSU - незначительно снизилось использование сжатого пространства
5)YGC - произошло несколько "молодых" чисток
6)YGCT - увеличилось время сборки мусора Eden
7)FGC - произошло несколько полных чисток
8)FGCT - увеличилось время полных сборок мусора
9)GCT - увеличилось общее время время работы GC

3)jconsole

При установки минимально необходимого объема памяти, и при подключение jconsole, приложение падает с ошибкой - OutOfMemoryError.
Под нагрузкой приложение падает при объеме выделенной памяти 24mb.

3.1)Состояние покоя, на протяжении 10 минут:
Heap - До того как сработает GC объем заполняемой памяти увеличивается до 12-14mb.
Old gen - 3,5mb линейно, но не с самого начала
Survivor Space - падает с отметки 0,6mb по 100kb, раз в 5 минут
Eden Space - растет по 200kb раз в 20 сек, доходит до отметки 9-11mb.
GC отрабатывает один раз в 4:30 мин.

3.2)Под нагрузкой (выгружаются 100_000 объектов, ранее загруженные в БД)
Heap - скачек до 21mb, спустя 20 сек чистка до 12mb.
Old gen - скачек с 3,5mb до 16 mb, спустя 20 сек чистка до 12mb, спустя 5 минут вернулся в изначальное состояние
Survivor Space - упал до 200kb
Eden Space - вовремя выгрузки упал до 0.


